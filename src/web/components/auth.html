<script async type="module" crossorigin src="/assets/main.js"></script>
<link rel="stylesheet" crossorigin href="/assets/main.css">
<!-- auth.html -->
<div id="auth-forms" x-data="" class="flex flex-col min-h-screen bg-zinc-100 dark:bg-zinc-900 py-20 px-5">
    <div class="flex items-center sm:flex-grow sm:justify-center sm:-mt-20 py-20">
        <div class="max-w-md w-full space-y-8">

            <!-- Login Form -->
            <section id="login-form" x-show="$store.auth.activeForm === 'login'"
                class="bg-white dark:bg-zinc-800 shadow-lg rounded-lg p-8">
                <h2 class="block w-full text-center text-2xl font-bold mb-6 text-zinc-900 dark:text-white">
                    Accede a la plataforma
                </h2>
                <!-- <a @click.prevent="$store.auth.activeForm = 'register'"
                    class="block w-full text-center text-sm font-medium text-zinc-600 hover:text-zinc-500 dark:text-zinc-400 cursor-pointer">
                    ¿No tienes cuenta? Regístrate
                </a> -->
                <form class="mt-4 space-y-6" hx-post="" hx-ext="json-encoding" hx-trigger="submit" hx-swap="none"
                    hx-request='{"credentials": true}'>
                    <!-- hx-request='{"credentials": true}' -->
                    <!-- hx-on:after-request="handleResponse(event) -->
                    <!-- Email Field -->
                    <div>
                        <label for="login-email" class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">
                            Correo electrónico
                        </label>
                        <input type="email" id="login-email" name="email" required autocomplete="username"
                            class="mt-1 block w-full px-3 py-2 bg-white border border-zinc-300 rounded-lg shadow-sm focus:outline-none focus:ring-zinc-500 focus:border-zinc-500 dark:bg-zinc-700 dark:border-zinc-600 dark:text-white">
                    </div>

                    <!-- Password Field -->
                    <div>
                        <div class="flex justify-between">
                            <label for="login-password"
                                class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">
                                Contraseña
                            </label>
                            <a @click.prevent="$store.auth.activeForm = 'forgot'"
                                class="text-sm font-medium text-zinc-600 hover:text-zinc-500 dark:text-zinc-400 cursor-pointer">
                                ¿Has olvidado la contraseña?
                            </a>
                        </div>
                        <div
                            class="mt-1 flex items-center gap-2 block w-full border border-zinc-300 rounded-lg focus:outline-none focus:ring-zinc-500 focus:border-zinc-500 bg-white dark:bg-zinc-700 dark:border-zinc-600 dark:text-white">
                            <div class="relative flex-1">
                                <input type="password" id="login-password" name="password" required
                                    autocomplete="current-password"
                                    class="block w-full px-3 py-2 rounded-lg focus:outline-none dark:bg-zinc-700 dark:text-white">
                            </div>
                            <button type="button"
                                class="flex-none p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-700 toggle-password">
                            </button>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <div>
                        <button type="submit"
                            class="w-full flex justify-center py-2 px-4 border border-transparent rounded-lg shadow-md text-sm font-medium text-white bg-zinc-600 hover:bg-zinc-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-zinc-500">
                            Acceder
                        </button>
                    </div>
                </form>
            </section>

            <!-- Register Form -->
            <section id="register-form" x-show="$store.auth.activeForm === 'register'"
                class="bg-white dark:bg-zinc-800 shadow-lg rounded-lg p-8">
                <h2 class="block w-full text-center text-2xl font-bold mb-6 text-zinc-900 dark:text-white">
                    Crea una cuenta
                </h2>
                <a @click.prevent="$store.auth.activeForm = 'login'"
                    class="block w-full text-center text-sm font-medium text-zinc-600 hover:text-zinc-500 dark:text-zinc-400 cursor-pointer">
                    ¿Ya tienes una cuenta? Accede
                </a>
                <form class="mt-4 space-y-6" hx-post="" hx-trigger="submit" hx-ext="json-encoding" hx-swap="none">
                    <div>
                        <label for="register-name" class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">
                            Nombre completo
                        </label>
                        <input type="text" id="register-name" name="name" required
                            class="mt-1 block w-full px-3 py-2 bg-white border border-zinc-300 rounded-lg shadow-sm focus:outline-none focus:ring-zinc-500 focus:border-zinc-500 dark:bg-zinc-700 dark:border-zinc-600 dark:text-white">
                    </div>
                    <div>
                        <label for="register-email" class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">
                            Dirección de correo electrónico
                        </label>
                        <input type="email" id="register-email" name="email" required autocomplete="username"
                            class="mt-1 block w-full px-3 py-2 bg-white border border-zinc-300 rounded-lg shadow-sm focus:outline-none focus:ring-zinc-500 focus:border-zinc-500 dark:bg-zinc-700 dark:border-zinc-600 dark:text-white">
                    </div>
                    <div>
                        <label for="register-password"
                            class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">
                            Contraseña
                        </label>
                        <div
                            class="mt-1 flex items-center gap-2 block w-full border border-zinc-300 rounded-lg focus:outline-none focus:ring-zinc-500 focus:border-zinc-500 bg-white dark:bg-zinc-700 dark:border-zinc-600 dark:text-white">
                            <div class="relative flex-1">
                                <input type="password" id="register-password" name="password" required
                                    autocomplete="current-password"
                                    class="block w-full px-3 py-2 rounded-lg focus:outline-none dark:bg-zinc-700 dark:text-white">
                            </div>
                            <button type="button"
                                class="flex-none p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-700 toggle-password">

                                <!-- Eye shape for "hide password" -->



                            </button>
                        </div>
                    </div>
                    <div>
                        <button type="submit"
                            class="w-full flex justify-center py-2 px-4 border border-transparent rounded-lg shadow-md text-sm font-medium text-white bg-zinc-600 hover:bg-zinc-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-zinc-500">
                            Registrarse
                        </button>
                    </div>
                </form>
            </section>

            <!-- Forgot Password Form -->
            <section id="forgot-form" x-show="$store.auth.activeForm === 'forgot'"
                class="bg-white dark:bg-zinc-800 shadow-lg rounded-lg p-8">
                <h2 class="block w-full text-center text-2xl font-bold mb-6 text-zinc-900 dark:text-white">
                    Recuperar contraseña
                </h2>
                <a @click.prevent="$store.auth.activeForm = 'login'"
                    class="block w-full text-center text-sm font-medium text-zinc-600 hover:text-zinc-500 dark:text-zinc-400 cursor-pointer">
                    Volver al inicio de sesión
                </a>
                <form class="mt-4 space-y-6" hx-post="" hx-ext="json-encoding" hx-trigger="submit" hx-swap="none">
                    <div>
                        <label for="forgot-email" class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">
                            Correo electrónico
                        </label>
                        <input type="email" id="forgot-email" name="email" required
                            class="mt-1 block w-full px-3 py-2 bg-white border border-zinc-300 rounded-lg shadow-sm focus:outline-none focus:ring-zinc-500 focus:border-zinc-500 dark:bg-zinc-700 dark:border-zinc-600 dark:text-white">
                    </div>
                    <button type="submit"
                        class="w-full flex justify-center py-2 px-4 border border-transparent rounded-lg shadow-md text-sm font-medium text-white bg-zinc-600 hover:bg-zinc-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-zinc-500">
                        Enviar instrucciones
                    </button>
                </form>
            </section>

            <!-- Reset Password Form -->
            <section id="reset-form" x-show="$store.auth.activeForm === 'reset'"
                class="bg-white dark:bg-zinc-800 shadow-lg rounded-lg p-8">
                <h2 class="block w-full text-center text-2xl font-bold mb-6 text-zinc-900 dark:text-white">
                    Nueva contraseña
                </h2>

                <form id="resetPasswordForm" class="mt-4 space-y-6" hx-post="" hx-ext="json-encoding"
                    hx-trigger="submit" hx-swap="none">
                    <input type="hidden" id="reset-token" name="token">
                    <input type="hidden" id="reset-user-id" name="userId">

                    <!-- First password -->
                    <div>
                        <label for="reset-password-1"
                            class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">
                            Contraseña
                        </label>
                        <div class="mt-1 flex items-center gap-2 w-full border border-zinc-300 rounded-lg
                           focus:outline-none focus:ring-zinc-500 focus:border-zinc-500
                           bg-white dark:bg-zinc-700 dark:border-zinc-600 dark:text-white">
                            <div class="relative flex-1">
                                <input type="password" id="reset-password-1" name="password" required
                                    autocomplete="current-password" class="block w-full px-3 py-2 rounded-lg focus:outline-none 
                               dark:bg-zinc-700 dark:text-white">
                            </div>
                            <button type="button"
                                class="flex-none p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-700 toggle-password"></button>
                        </div>
                    </div>

                    <!-- Second password -->
                    <div>
                        <label for="reset-password-2"
                            class="block text-sm font-medium text-zinc-700 dark:text-zinc-300">
                            Repite la contraseña
                        </label>
                        <div class="mt-1 flex items-center gap-2 w-full border border-zinc-300 rounded-lg
                           focus:outline-none focus:ring-zinc-500 focus:border-zinc-500
                           bg-white dark:bg-zinc-700 dark:border-zinc-600 dark:text-white">
                            <div class="relative flex-1">
                                <input type="password" id="reset-password-2" name="confirm_password" required
                                    autocomplete="current-password" class="block w-full px-3 py-2 rounded-lg focus:outline-none 
                               dark:bg-zinc-700 dark:text-white">
                            </div>
                            <button type="button"
                                class="flex-none p-2 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-700 toggle-password"></button>
                        </div>
                    </div>

                    <!-- Error message (will show text if mismatch) -->
                    <p id="error-message" class="text-red-500 text-sm" style="display: none;"></p>

                    <!-- Submit -->
                    <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent
                         rounded-lg shadow-md text-sm font-medium text-white bg-zinc-600
                         hover:bg-zinc-700 focus:outline-none focus:ring-2
                         focus:ring-offset-2 focus:ring-zinc-500">
                        Actualizar contraseña
                    </button>
                </form>
            </section>

        </div>
    </div>
</div>
